# 📝 브라우저의 동작 원리

## 웹 브라우저의 주요 구성요소
![image](https://github.com/user-attachments/assets/885e928e-2fe6-4b7c-ba63-7e37c8e1fd16)


#### 사용자 인터페이스
- 사용자가 웹 브라우저와 상호작용하는 부분(주소입력창, 뒤로가기, 앞으로가기, 새로고침 등)

#### 브라우저 엔진
- 웹 브라우저 내의 핵심 엔진으로, 사용자의 명령을 렌더링 엔진과 통신 모듈에게 전달
  
#### 자료 저장소
- 웹 서버에서 받은 리소스를 저장하며, 같은 리소스를 재사용할 수 있도록 지원.
  
#### 렌더링 엔진
- 웹 페이지를 렌더링하는 모듈
  
  - HTML 파서: DOM 트리 구축
  - CSS 파서: CSSOM 트리 구축
  - 레이아웃 모듈: 레이아웃 계산
  - 페인트 모듈: 시각적 요소 그리기
  - 컴포지팅 모듈: 최종적으로 화면을 그리기 위한 구성 요소 합침
  
#### 통신 모듈
- 웹 서버와 통신을 담당하는 모듈. DNS 질의, HTTP 요청 및 응답 처리
- 받은 리소스를 렌더링 엔진에 전달하거나 캐시에 저장.
#### JS 엔진
- 자바스크립트 코드를 해석하고 실행하는 엔진
- 렌더링 엔진과 상호작용하여 DOM을 수정하거나 CSSOM을 변경할 수 있음
#### UI 백엔드 모듈 
- 레이아웃과 페인팅 후 디자인 구조를 화면에 출력하는 역할을 


## 동작 순서

![image](https://github.com/user-attachments/assets/e43560ec-0549-4bf0-b8be-5bca0034a211)

1. 사용자가 **사용자 인터페이스**를 통해 웹 브라우저에 **도메인 주소**를 입력한다.
2. 웹 브라우저는 통신모듈을 통해 DNS서버에 **도메인 주소**를 질의한다.
3. DNS서버는 도메인의 **IP 주소**를 반환한다.
4. 웹 브라우저가 **IP 주소**와 **HTTP 요청 메시지**를 작성하여 TCP/IP 프로토콜을 이용해 웹 서버에 전송한다.
5. 웹 서버는 요청에 응답하여 HTML, CSS, JS 등의 **리소스**를 TCP/IP 프로토콜을 이용해 반환한다.
6. 반환된 리소스는 브라우저의 통신모듈로 수신된다.
7. 리소스를 바로 처리해야할 때는 리소스를 바로 **렌더링 엔진**으로 전달하고, 바로 처리하지 않아도 될 때는 **캐시**에 저장한다.
8. **렌더링 엔진**에 의해 렌더링이 시작된다.
9. **HTML 파서**에 의해 DOM TREE가 구축된다.
10. **CSS 파서**에 의해 CSSOM TREE가 구축된다.
11. **DOM, CSSOM** 를 바탕으로 레이아웃, 페인트, 컴포지팅 모듈이 디자인 구조를 작성한다.
12. **UI 백엔드**가 완성된 디자인 구조를 이용해 화면에 그림을 그린다.
13. 이와 동시에 **JS 엔진**이 스크립트를 해석하고 실행한다.
14. **UI 백엔드**가 완성된 화면을 **사용자 인터페이스**에 전달하여 사용자에게 화면을 보여준다.
