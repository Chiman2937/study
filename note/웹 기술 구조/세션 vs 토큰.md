# 📝 세션 vs 토큰
## 💡 세션 기반 인증(Session-based Authentication)
#### 🔍 동작방식
- 사용자가 로그인하면, 서버는 해당 사용자에 대한 **세션 ID를 생성**하고 이를 **DB에 저장**한다.
- 서버는 이 세션 ID를 **쿠키에 담아 클라이언트에 전송**하고
- 클라이언트는 이후 요청마다 이 쿠키를 함께 전송한다.
- 서버는 이 세션 ID를 조회해 해당 **사용자의 인증 정보를 확인**한다.

#### 📌 특징
- **서버 중심의 인증 방식**이다.
- 세션 상태는 **서버가 직접 관리**하는 상태 기반(stateful) 방식이다.

#### ✔️ 장점
- **보안성 우수**: 서버에서 세션 정보를 직접 관리하므로 위변조 위험이 낮다.
- **세션 무효화 쉬움**: 서버에서 세션을 삭제하면 즉시 로그아웃 처리 가능

#### ❗ 단점
- **확장성 문제**: 서버가 모든 세션을 저장하므로 대규모 서비스에서는 부하가 큼
- **서버 저장소 필요**: Redis 같은 외부 저장소나 DB 관리 비용이 발생함.
---
## 💡 토큰 기반 인증(Token-based Authentication)
#### 🔍 동작방식
- 사용자가 로그인하면, 서버는 JWT같은 **토큰을 생성**하고 토큰 안에 **사용자 정보를 암호화된 형태로 포함**시킨다.
- 토큰은 클라이언트에 전달되며 쿠키, 로컬스토리지, 세션스토리지 등에 저장된다.
- 이후 클라이언트는 API 요청 시 HTTP 헤더에 토큰을 포함시켜 보낸다.
- 서버는 이 토큰을 검증만 하고, 별도의 세션 상태를 저장하지 않는다.

#### 📌 특징
- **클라이언트 중심의 인증 방식**이다.
- 서버는 인증상태를 저장하지 않고, **무상태(stateless)**로 처리한다.

#### ✔️ 장점
- **확장성 우수**: 서버에 상태 정보를 저장하지 않아 수평 확장이 용이함.
- **모바일 및 API에 적합**: RESTful API, SPA에 적합하다.

---

<details>
  <summary>🤔 왜 토큰 기반 인증이 모바일 및 API에 적합한가?</summary>

#### ✅ 1. RESTful API는 Stateless(무상태) 원칙을 따름
REST API는 각 요청이 독립적이어야 하며, 서버는 이전 요청의 상태를 기억하지 않아야 합니다.

토큰 기반 인증은 서버가 인증 상태를 저장하지 않기 때문에, REST API의 설계 철학과 잘 맞습니다.

클라이언트는 매 요청마다 토큰을 함께 전송하고, 서버는 그 토큰만 검증하면 되므로 확장성과 유연성이 뛰어납니다.

#### ✅ 2. SPA(Single Page Application)는 클라이언트 중심 구조
SPA는 브라우저에서 하나의 HTML 페이지로 동작하며, 대부분의 상태와 라우팅을 클라이언트가 관리합니다.

이때 사용자 인증 상태도 클라이언트에서 유지하는 것이 자연스럽기 때문에, 클라이언트가 직접 토큰을 보관하고 사용하는 구조가 적합합니다.

리프레시 토큰을 사용해 자동 로그인 유지나 토큰 만료 대응도 쉽게 구현할 수 있습니다.

#### ✅ 3. 모바일 앱은 쿠키 대신 로컬 저장소 사용
모바일 앱(Android, iOS)은 웹 브라우저처럼 쿠키를 자동으로 관리하지 않기 때문에, 세션 기반 인증은 불편하거나 보안 이슈가 발생할 수 있습니다.

반면 토큰 기반 인증은 로그인 후 받은 토큰을 앱 내의 **Secure Storage(Keychain, EncryptedSharedPrefs 등)**에 저장하고, 매 요청마다 HTTP 헤더에 직접 첨부하는 구조이기 때문에 모바일 환경에 잘 맞습니다.

#### ✅ 4. 토큰의 자체 정보 포함(Self-contained) 특성
JWT(JSON Web Token) 등은 토큰 내부에 유저 ID, 권한 정보 등을 포함할 수 있어 추가적인 요청 없이 인증 정보 확인이 가능합니다.

이는 느린 네트워크 환경이나 통신 비용이 중요한 모바일 환경에서 효율적인 장점이 됩니다.
</details>

---

#### ❗ 단점
- **보안 위험 존재**: 토큰이 노출되면 탈취된 토큰으로 인증이 가능함.
- **토큰 무효화 어려움**: 서버가 토큰을 저장하지 않기 때문에 강제 로그아웃이 어렵다.
- **토큰 재발급 로직 필요**: `Access Token`/`Refresh token` 구조 등 추가적인 관리 필요

---

## 📜 요약 비교

| 항목          | 세션 기반 인증             | 토큰 기반 인증                   |
| ----------- | -------------------- | -------------------------- |
| 저장 위치       | 서버(DB 또는 메모리)        | 클라이언트(쿠키, 로컬스토리지 등)        |
| 인증 상태 관리    | 서버가 상태 관리 (stateful) | 무상태 방식 (stateless)         |
| 확장성         | 낮음 (서버 부하 증가)        | 높음 (수평 확장 용이)              |
| 모바일/API 적합성 | 낮음                   | 높음                         |
| 보안성         | 상대적으로 높음             | 토큰 유출 시 위험                 |
| 로그아웃 처리     | 서버에서 즉시 무효화 가능       | 서버 측 무효화 어려움               |
| 복잡성         | 비교적 단순               | 토큰 재발급, 저장소 선택 등 복잡한 관리 필요 |
