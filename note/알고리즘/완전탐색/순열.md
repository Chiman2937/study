# 순열(Permutation)

n개의 요소를 나열하는 모든 경우의 수를 구하는 것을 말한다.

### 경우의 수 계산식

- 첫번째 자리: n개 중 하나 선택 가능
- 두번째 자리: n-1개 중 하나 선택 가능
- 세번째 자리: n-2개 중 하나 선택 가능
- ...
- 마지막 자리: 1개 중 하나 선택 가능
=> n!

ex)
```
// n = 3 인 경우: [1, 2, 3]
3! = 3 * 2 * 1 = 6가지

[1,2,3]
[1,3,2]
[2,1,3]
[2,3,1]
[3,1,2]
[3,2,1]

```

## 모든 조합 구하기

요소의 순서에 따라 값이 달라진다고 판정하기 때문에, 각 요소가 맨 앞에 오는 모든 경우를 계산해야 한다.
```
[1, 2] !== [2, 1]
```

맨 앞에 오는 숫자 `first`와 나머지 부분 `rest`로 분리하여 `rest`가 빈값일 때의 first의 집합을 구하면 된다.

| 단계 | stack | first | rest | result | 비고 |
|---|---|---|---|---|---|
| 1 |  | 1 | [2,3] | [] | 1을 선택 |
| 2 | [1] | 2 | [3] | [] | 2를 선택 |
| 3 | [1,2] | 3 | [] | [] | 3을 선택 |
| 4 | [1,2,3] | - | - | [[1,2,3]] | ✅ 완성 |
| 5 | [1] | 3 | [2] | [[1,2,3]] | 백트래킹 후 3 선택 |
| 6 | [1,3] | 2 | [] | [[1,2,3]] | 2를 선택 |
| 7 | [1,3,2] | - | - | [[1,2,3], [1,3,2]] | ✅ 완성 |
| 8 |  | 2 | [1,3] | [[1,2,3], [1,3,2]] | 백트래킹, 2를 선택 |
| 9 | [2] | 1 | [3] | [[1,2,3], [1,3,2]] | 1을 선택 |
| 10 | [2,1] | 3 | [] | [[1,2,3], [1,3,2]] | 3을 선택 |
| 11 | [2,1,3] | - | - | [[1,2,3], [1,3,2], [2,1,3]] | ✅ 완성 |
| 12 | [2] | 3 | [1] | [[1,2,3], [1,3,2], [2,1,3]] | 백트래킹 후 3 선택 |
| 13 | [2,3] | 1 | [] | [[1,2,3], [1,3,2], [2,1,3]] | 1을 선택 |
| 14 | [2,3,1] | - | - | [[1,2,3], [1,3,2], [2,1,3], [2,3,1]] | ✅ 완성 |
| 15 |  | 3 | [1,2] | [[1,2,3], [1,3,2], [2,1,3], [2,3,1]] | 백트래킹, 3을 선택 |
| 16 | [3] | 1 | [2] | [[1,2,3], [1,3,2], [2,1,3], [2,3,1]] | 1을 선택 |
| 17 | [3,1] | 2 | [] | [[1,2,3], [1,3,2], [2,1,3], [2,3,1]] | 2를 선택 |
| 18 | [3,1,2] | - | - | [[1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2]] | ✅ 완성 |
| 19 | [3] | 2 | [1] | [[1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2]] | 백트래킹 후 2 선택 |
| 20 | [3,2] | 1 | [] | [[1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2]] | 1을 선택 |
| 21 | [3,2,1] | - | - | [[1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2], [3,2,1]] | ✅ 완성 |

```js
function permutate(arr) {
  const result = [];
  if (arr.length === 0) return [[]];

  for (let i = 0; i < arr.length; i++) {
    const first = arr[i]; //맨 앞에 고정할 요소
    const rest = [...arr.slice(0, i), ...arr.slice(i + 1)]; // 나머지 요소
    const restPerms = permutate(rest); // 나머지 요소를 이용한 순열 실행(재귀)
    for (const perm of restPerms) {
      result.push([first, ...perm]); // 고정요소 + 나머지 순열
    }
  }
  return result;
}

console.log(permutate([1, 2, 3]));

```


- 시간 복잡도: O(n) => -n개의 순열 생성
- 공간 복잡도: O(nxn!) => 모든 순열 저장

## 부분 순열
n개 요소 중 r개만 선택해서 나열하는 경우

### 경우의 수 계산식

4개의 요소 중 2개만 선택할 경우

- 첫번째 자리: 4개 중 하나 선택 가능
- 두번째 자리: 3개 중 하나 선택 가능

=> nPr === n! / (n-r)!

```js
function solution(arr, l) {
  function permutate(arr, depth) {
    const result = [];
    if (depth === l) return [[]]; //l개 만큼 선택 됐으면 return

    for (let i = 0; i < arr.length; i++) {
      const first = arr[i]; //맨 앞에 고정할 요소
      const rest = [...arr.slice(0, i), ...arr.slice(i + 1)]; // 나머지 요소
      const restPerms = permutate(rest, depth + 1); // 나머지 요소를 이용한 순열 실행(재귀)
      for (const perm of restPerms) {
        result.push([first, ...perm]); // 고정요소 + 나머지 순열
      }
    }
    return result;
  }
  return permutate(arr, 0);
}

console.log(solution([1, 2, 3, 4], 3));

```
